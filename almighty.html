<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
<script>
var dates = ["10-Mar-2020","11-Mar-2020","12-Mar-2020","13-Mar-2020","14-Mar-2020","15-Mar-2020","16-Mar-2020","17-Mar-2020","18-Mar-2020","19-Mar-2020","20-Mar-2020","21-Mar-2020","22-Mar-2020","23-Mar-2020","24-Mar-2020","25-Mar-2020","26-Mar-2020","27-Mar-2020","28-Mar-2020","29-Mar-2020","30-Mar-2020","31-Mar-2020","1-Apr-2020","2-Apr-2020","3-Apr-2020","4-Apr-2020","5-Apr-2020","6-Apr-2020","7-Apr-2020","8-Apr-2020","9-Apr-2020","10-Apr-2020","11-Apr-2020","12-Apr-2020","13-Apr-2020","14-Apr-2020","15-Apr-2020","16-Apr-2020","17-Apr-2020","18-Apr-2020","19-Apr-2020","20-Apr-2020","21-Apr-2020","22-Apr-2020","23-Apr-2020","24-Apr-2020","25-Apr-2020","26-Apr-2020","27-Apr-2020","28-Apr-2020","29-Apr-2020","30-Apr-2020","1-May-2020","2-May-2020","3-May-2020","4-May-2020","5-May-2020","6-May-2020","7-May-2020","8-May-2020","9-May-2020","10-May-2020","11-May-2020","12-May-2020","13-May-2020","14-May-2020","15-May-2020","16-May-2020","17-May-2020","18-May-2020","19-May-2020","20-May-2020","21-May-2020","22-May-2020","23-May-2020","24-May-2020","25-May-2020","26-May-2020","27-May-2020","28-May-2020","29-May-2020","30-May-2020","31-May-2020","1-Jun-2020","2-Jun-2020","3-Jun-2020","4-Jun-2020","5-Jun-2020","6-Jun-2020","7-Jun-2020","8-Jun-2020"];
var deflection = [5.78,5.88,6,6.14,6.29,6.45,6.63,6.81,6.99,7.19,7.39,7.59,7.8,8.02,8.24,8.46,8.69,8.93,9.16,9.41,9.65,9.91,10.17,10.43,10.7,10.97,11.26,11.54,11.84,12.14,12.45,12.77,13.1,13.43,13.78,14.14,14.5,14.88,15.27,15.67,16.09,16.51,16.96,17.42,17.9,18.39,18.91,19.45,20.01,20.59,21.2,21.83,22.5,23.2,23.93,24.71,25.52,26.38,27.28,28.24,29.26,30.35,31.5,32.74,34.06,35.48,37.01,38.66,40.45,42.4,44.53,46.87,49.45,52.31,55.5,59.08,63.14,67.76,73.09,79.3,86.63,442.11,491.88,554.08,634.02,740.57,889.68,1113.24,1485.68,2230.21,4462.91];
var rel_distance = [105581589.6,104926096.9,104362479.7,103867807.9,103423659.4,103015116,102630020.9,102258420.7,101892136.7,101524432.4,101149751.1,100763508.7,100361926.3,99941896.52,99500873.28,99036782.44,98547947.6,98033028.48,97490969.51,96920956.68,96322381.12,95694808.14,95037950.74,94351646.5,93635837.06,92890549.58,92115879.77,91311976.81,90479030.96,89617264.89,88726929.71,87808305.08,86861701.98,85887465.61,84885976.7,83857650.78,82802935.46,81722306.93,80616266.13,79485335.18,78330054.31,77150979.32,75948679.27,74723734.6,73476735.2,72208278.52,70918967.59,69609408.88,68280210.12,66931977.91,65565315.28,64180819.05,62779076.93,61360664.43,59926141.56,58476049.92,57010910.71,55531224.76,54037475.23,52530133,51009663.6,49476534.04,47931217.86,46374197.6,44805965.03,43227019.83,41637867.56,40039017.67,38430981.68,36814271.85,35189400.07,33556876.92,31917210.79,30270906.68,28618464.8,26960378.61,25297132.47,23629198.92,21957035.6,20281082.17,18601757.07,16919454.65,15234542.45,13547359.29,11858214.31,10167387.56,8475132.45,6781679.92,5087243.56,3392024.55,1696215.15];
var rel_velocity = [24.59,22.31,20.29,18.49,16.87,15.41,14.11,12.94,11.89,10.96,10.15,9.45,8.87,8.38,8.01,7.74,7.57,7.48,7.48,7.55,7.67,7.85,8.07,8.32,8.59,8.88,9.19,9.5,9.82,10.14,10.47,10.8,11.12,11.44,11.76,12.07,12.38,12.68,12.98,13.27,13.55,13.83,14.1,14.36,14.61,14.86,15.1,15.33,15.55,15.77,15.98,16.18,16.37,16.56,16.74,16.92,17.08,17.25,17.41,17.56,17.71,17.85,17.98,18.11,18.24,18.36,18.47,18.58,18.68,18.77,18.86,18.95,19.03,19.1,19.16,19.23,19.28,19.33,19.38,19.42,19.46,19.49,19.52,19.54,19.56,19.58,19.59,19.61,19.62,19.62,19.63 ];

var almighty_x = [-56682546.55, -58751311.7, -60630077.98, -62340322.43, -63899763.52, -65323210.04, -66623181.02, -67810367.32, -68893981.16, -69882024.9, -70781500.63, -71598575.6, -72338714.32, -73006785.11, -73607146.89, -74143720.44, -74620047.42, -75039339.63, -75404520.31, -75718259.11, -75983001.82, -76200995.7, -76374311.4, -76504861.72, -76594418.04, -76644624.5, -76657010.48, -76633001.56, -76573929.11, -76481038.89, -76355498.55, -76198404.36, -76010787.26, -75793618.21, -75547813, -75274236.64, -74973707.2, -74646999.42, -74294847.88, -73917949.94, -73516968.35, -73092533.71, -72645246.64, -72175679.86, -71684379.97, -71171869.22, -70638647.03, -70085191.47, -69511960.59, -68919393.64, -68307912.22, -67677921.37, -67029810.53, -66363954.46, -65680714.13, -64980437.48, -64263460.22, -63530106.5, -62780689.57, -62015512.44, -61234868.42, -60439041.71, -59628307.93, -58802934.58, -57963181.56, -57109301.58, -56241540.63, -55360138.36, -54465328.52, -53557339.29, -52636393.68, -51702709.92, -50756501.73, -49797978.73, -48827346.74, -47844808.14, -46850562.14, -45844805.17, -44827731.15, -43799531.81, -42760397.07, -41710515.3, -40650073.69, -39579258.57, -38498255.78, -37407251.01, -36306430.16, -35195979.75, -34076087.31, -32946941.79, -31808734.02 ];
var almighty_y = [-29225494.81, -33027308.16, -36722538.39, -40315869.83, -43811809.55, -47214612.94, -50528255.62, -53756430.25, -56902556.1, -59969794.94, -62961069.53, -65879082.64, -68726335.57, -71505145.62, -74217662.22, -76865881.62, -79451660.3, -81976727.04, -84442693.75, -86851065.29, -89203248.28, -91500558.96, -93744230.37, -95935418.75, -98075209.34, -100164621.6, -102204614, -104196088, -106139892.7, -108036827.3, -109887645.3, -111693056.8, -113453731.4, -115170300.5, -116843360, -118473471.5, -120061165, -121606940, -123111267.6, -124574591.4, -125997329.3, -127379874.4, -128722596.3, -130025842, -131289937.1, -132515186.3, -133701874.5, -134850267.5, -135960612.5, -137033138.8, -138068058.8, -139065567.5, -140025844.3, -140949052.3, -141835339.2, -142684837.7, -143497665.7, -144273926.6, -145013709.4, -145717089.4, -146384127.6, -147014871.6, -147609355.5, -148167599.7, -148689611.4, -149175384.3, -149624899, -150038122.6, -150415008.8, -150755498, -151059517, -151326979.2, -151557783.8, -151751816.4, -151908948.5, -152029036.9, -152111924.1, -152157437.4, -152165389.1, -152135575.7, -152067777.7, -151961759.3, -151817267.6, -151634032.2, -151411764.8, -151150158.5, -150848886.8, -150507603.3, -150125940.8, -149703510.3, -149239900.1];
var mercury_x = [-56682546.55, -55515262.75, -54142900.14, -52576183.25, -50825732.52, -48902046.44, -46815491.42, -44576298.06, -42194562.41, -39680251.66, -37043213.06, -34293185.81, -31439815.17, -28492668.53, -25461253.07, -22355034.74, -19183458.46, -15955969.29, -12682034.57, -9371166.86, -6032947.68, -2677051.97, 686726.74, 4048450.53, 7398010.66, 10725100.65, 14019188.93, 17269491.16, 20464942.52, 23594170.07, 26645465.79, 29606760.42, 32465599.08, 35209119.22, 37824032.02, 40296608.51, 42612672.15, 44757599.71, 46716333.2, 48473405.74, 50012985.2, 51318939.96, 52374931.98, 53164543.09, 53671441.09, 53879592.75, 53773530.88, 53338682.36, 52561762.51, 51431238.84, 49937863, 48075263.96, 45840587.13, 43235154.33, 40265108.14, 36941992.75, 33283213.9, 29312315.8, 25059014.94, 20558943, 15853072.52, 10986830.32, 6008938.4, 970055.63, -4078681.26, -9087107.39, -14007364.54, -18795034.35, -23410012, -27817095.02, -31986292.17, -35892881.25, -39517259.92, -42844640.2, -45864637.18, -48570796.89, -50960100.77, -53032474.99, -54790324.65, -56238105.66, -57381941.22, -58229285.21, -58788632.22, -59069271.42, -59081080.68, -58834356.59, -58339675.92, -57607784.4, -56649508.61, -55475687.56, -54097120.69 ];
var mercury_y = [ -29225494.81, -32725542.04, -36104774.42, -39354474.65, -42466712.84, -45434269.47, -48250565.52, -50909599.51, -53405890.95, -55734429.83, -57890631.85, -59870298.75, -61669583.65, -63284960.9, -64713200.12, -65951344.37, -66996691.97, -67846782.09, -68499383.75, -68952488.29, -69204305.3, -69253261.97, -69098005.92, -68737411.75, -68170591.38, -67396908.5, -66415997.37, -65227786.41, -63832526.95, -62230827.67, -60423695.45, -58412582.99, -56199444.29, -53786798.57, -51177803.53, -48376338.92, -45387101.32, -42215710.92, -38868831.1, -35354301.43, -31681284.08, -27860423.49, -23904018.02, -19826201.42, -15643130.35, -11373172.36, -7037086.19, -2658183.35, 1737543.5, 6121343.72, 10461705.24, 14724449.75, 18872953.26, 22868518.42, 26670920.28, 30239138.62, 33532275.23, 36510635.35, 39136929.13, 41377525.68, 43203672.64, 44592583.54, 45528297.56, 46002232.96, 46013385.24, 45568159.03, 44679861.45, 43367917.47, 41656889.54, 39575391.4, 37154981.55, 34429107.88, 31432155.52, 28198630.4, 24762492.11, 21156635.9, 17412513, 13559872.69, 9626606.55, 5638675.24, 1620099.2, -2407002.98, -6422342.33, -10407364.67, -14345141.99, -18220256.92, -22018685.14, -25727679.59, -29335658.84, -32832101.22, -36207445.89 ];
var earth_x = [-146126088.5, -146610392.1, -147050716.3, -147446940.5, -147798940, -148106592.3, -148369782.8, -148588409.9, -148762389, -148891654.1, -148976159.5, -149015880.4, -149010813.4, -148960976.5, -148866409.8, -148727175.2, -148543356.4, -148315058.8, -148042408.9, -147725554.2, -147364661.9, -146959919.2, -146511531.8, -146019722.8, -145484731.4, -144906809.9, -144286219.8, -143623226.3, -142918092.7, -142171074.5, -141382417.1, -140552355.8, -139681120.6, -138768942.9, -137816061.9, -136822730.4, -135789218.2, -134715813.9, -133602825.5, -132450580.6, -131259426, -130029727.2, -128761868.7, -127456253.5, -126113303.2, -124733457.5, -123317174.3, -121864928.4, -120377211.3, -118854529, -117297401.5, -115706360.1, -114081945.2, -112424703.4, -110735183.6, -109013932, -107261488.2, -105478380.6, -103665124.4, -101822223.5, -99950173.66, -98049469.96, -96120612.73, -94164113.39, -92180497.91, -90170308.46, -88134103.68, -86072458.22, -83985961.99, -81875219.56, -79740849.62, -77583484.78, -75403771.37, -73202369.31, -70979951.71, -68737204.12, -66474823.26, -64193515.27, -61893993.33, -59576974.88, -57243178.41, -54893320.01, -52528109.7, -50148247.89, -47754422.24, -45347305.57, -42927555.51, -40495816.45, -38052723.62, -35598908.8, -33135006.14] ;
var earth_y = [26804969.19, 24260991.65, 21709648.06, 19151643.66, 16587696.4, 14018540.72, 11444928.35, 8867627.04, 6287418.16, 3705094.01, 1121455.33, -1462690.88, -4046533.25, -6629257.81, -9210049.6, -11788094.3, -14362579.91, -16932698.31, -19497646.81, -22056629.71, -24608859.77, -27153559.76, -29689964.2, -32217321.34, -34734895.37, -37241968.68, -39737843.63, -42221842.96, -44693307.92, -47151593.46, -49596060.89, -52026069.73, -54440970.85, -56840102.66, -59222790.68, -61588349.53, -63936086.29, -66265303.89, -68575304.17, -70865390.19, -73134868.16, -75383048.8, -77609248.72, -79812791.66, -81993009.88, -84149245.66, -86280852.93, -88387198.95, -90467665.96, -92521652.9, -94548576.94, -96547875.04, -98519005.33, -100461448.2, -102374706.7, -104258305.7, -106111789.5, -107934716.7, -109726653.8, -111487168.2, -113215821.3, -114912165.9, -116575745.1, -118206095.2, -119802748.9, -121365239.4, -122893103.3, -124385883.8, -125843131.7, -127264407.3, -128649281.1, -129997335, -131308163.3, -132581374.2, -133816591.1, -135013455.1, -136171626.2, -137290785.6, -138370637.1, -139410907.8, -140411349.1, -141371736, -142291866, -143171557.2, -144010644.4, -144808974.3, -145566400.2, -146282775.9, -146957951.1, -147591769.1, -148184066.4 ];

$( document ).ready(function() {

	var selected_day = moment().format('DD-MMM-YYYY');
	initPlot( selected_day );
	
	$("#date").change(function() {
		initPlot( $("#date").val() );
	});
});
function initPlot(selected_day) {
	for (index = 0; index < dates.length; index++) {
		$('#date').append($('<option>', {value:dates[index], text:dates[index]}));
		if(selected_day == dates[index]) {
			var idx_store = index;
			console.log(idx_store);
		}
	}
	$('#date').val(selected_day);

	$('#today').html( selected_day );
	$('#dist').html( rel_distance[idx_store] );
	$('#vel').html( rel_velocity[idx_store] );
	$('#dv').html( deflection[idx_store] );
	
	var divid = document.getElementById('plot');
	var traces = [{
		x: earth_x,
		y: earth_y,
		type: 'scatter',
		mode: 'lines',
		name: 'Earth Orbit',
		line:  { color: 'green' },
	},{
		x: [ earth_x[idx_store] ],
		y: [ earth_y[idx_store] ],
		text: 'Earth',
		textposition: 'right',
		mode: 'markers+text',
		showlegend: false,
		marker: { size: 12, color: 'Green' }
	},{
		x: mercury_x,
		y: mercury_y,
		type: 'scatter',
		mode: 'lines',
		name: 'Mercury Orbit',
		line:  { color: 'orange' },
	},{
		x: [ mercury_x[idx_store] ],
		y: [ mercury_y[idx_store] ],
		text: 'Mercury',
		textposition: 'right',
		mode: 'markers+text',
		showlegend: false,
		marker: { size: 12, color: 'orange' }
	},{
		x: almighty_x,
		y: almighty_y,
		type: 'scatter',
		mode: 'lines',
		name: 'Almighty Trajectory',
		line:  { color: 'gray' },
	},{
		x: [ almighty_x[idx_store] ],
		y: [ almighty_y[idx_store] ],
		text: 'Almighty',
		textposition: 'right',
		mode: 'markers+text',
		showlegend: false,
		marker: { size: 12, symbol: 'triangle', color: 'gray' }
	},{
		x: [ 0 ],
		y: [ 0 ],
		mode: 'markers',
		showlegend: false,
		marker: { size: 12, symbol: 'star', color: '#CCCC00' }
	}];
	var options = {
		xaxis: {
			title: 'Solar System X (kilometers)',
			range: [-160e6, 160e6],
		},
		yaxis: {
			title: 'Solar System Y (kilometers)',
			range: [-160e6, 160e6],
		},
		legend: {
			x: 1,
			xanchor: 'right',
			y: 1
		}
	};
	Plotly.newPlot( divid, traces, options );
};
</script>
</head>
<body>
	<div>
		<p>On <span id="today">xx-xxx-xxxx</span>, the Almighty is <span id="dist">xx</span> kilometers from Earth approaching at <span id="vel">xx</span> km/sec.</p>
		<p>If Rasputin were to intervene today, it would have to cause the Almighty's velocity to change by <span id="dv">xx</span> km/sec to miss Earth by 1000 km.</p>
	</div>
	<div>
		<form>
		<label for="date">Choose another day:</label>
		<select id="date"></select>
	</div>
	<div id="plot" style="width:600px;height:600px;"></div>
</body>
</html>